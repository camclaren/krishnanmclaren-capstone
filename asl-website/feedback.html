<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Feedback</title>
    <link rel="stylesheet" type="text/css" href="./feedback.css">
</head>
<body>
    <header>
        <nav>
            <a href="home.html">Home</a>
            <a href="about.html">About</a>
            <a href="resources.html">Resources</a>
            <a href="test.html">Test</a>
        </nav>
    </header>
    
    <h2>Recognition Result</h2>
    <div id="result-display">
      <p>Loading result...</p>
    </div>
    
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const rawResult = localStorage.getItem('recognitionResult');
        
            if (rawResult) {
                const parsedResult = JSON.parse(rawResult);
        
                // The structure of the JSON is [[[ [label, confidence], [label, confidence], ... ]]]
                const predictions = parsedResult[0]; // Grab the innermost array
        
                // Sort predictions by confidence descending
                const topThree = predictions
                    .sort((a, b) => b[1] - a[1])  // Compare confidence values
                    .slice(0, 3);                 // Get top 3
        
                // Format the results nicely
                const displayText = topThree.map(
                    ([label, confidence], index) =>
                        `${index + 1}. ${label} (Confidence: ${(confidence * 100).toFixed(2)}%)`
                ).join('\n');
        
                // Update the result display
                document.getElementById('result-display').innerText = displayText;
        
            } else {
                document.getElementById('result-display').innerText = "No recognition result found.";
            }
        });
        </script>
        
    <ul>
        <a href="test.html" class="btn-item">Next</a>
    </ul>

    <footer>
        <p>&copy; 2025 KrishnanMcLaren. All Rights Reserved.</p>
    </footer>

    <script src="./feedback.js"></script> <!--calls js file to fill page w proper video-->>

</body>
</html>
